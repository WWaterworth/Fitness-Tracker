<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/solarized-dark.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <title>FitnessTrackr Docs</title>
  </head>
  <body>
    <div id="doc-html">
<h1>FitnessTrackr API Documentation</h1>
<h2>Introduction</h2>
<p>Here at FitnessTrackr we strive to provide you with an easy to consume API, so you can build out beautiful front end experiences and leave the Data management to us.</p>
<p>We have a small handful of endpoints, each documented below.</p>
<h3>Authentication through JSON Web Tokens</h3>
<p>When using the API, many calls are made in the context of a registered user. The API protects itself by requiring a token string passed in the Header for requests made in that context.</p>
<p>A sample request <strong>with</strong> an authorization token looks like this:</p>
<pre class="hljs language-js"><code>fetch(<span class="hljs-string">&#x27;https://fitnesstrac-kr.herokuapp.com/api/activities&#x27;</span>, {
  <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span>,
    <span class="hljs-string">&#x27;Authorization&#x27;</span>: <span class="hljs-string">&#x27;Bearer TOKEN_STRING_HERE&#x27;</span>
  },
  <span class="hljs-attr">body</span>: <span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-comment">/* whatever things you need to send to the API */</span> })
})
</code></pre>
<p>It is <strong>crucial</strong> that the value for <code>Authorization</code> is a string starting with <code>Bearer</code>, followed by a space, and finished with the <code>token</code> you receive either by registering or logging in. Deviating from this format will cause the API to not recognize the token, and will result in an error.</p>
<p>If the token is malformed, missing, or has been revoked, you will get a response specific to that.</p>
<pre class="hljs language-js"><code>{
  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;MissingUserError&quot;</span>,
  <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;You must be logged in to perform this action&quot;</span>
}
</code></pre>
<h3>General Return Schema</h3>
<p>ERROR</p>
<pre class="hljs language-js"><code>{
  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;MissingUserError&quot;</span>,
  <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;You must be logged in to perform this action&quot;</span>
}
</code></pre>
<p>SUCCESS (sends back created/updated entity)</p>
<pre class="hljs language-js"><code>{
    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">9</span>,
    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;bench press 4&quot;</span>,
    <span class="hljs-string">&quot;description&quot;</span>: <span class="hljs-string">&quot;4 sets of 10. Lift a safe amount, but push yourself!&quot;</span>
}
</code></pre>
<h2>User Endpoints</h2>
<h3><code>POST /api/users/register</code></h3>
<p>This route is used to create a new user account. On success, you will be given a JSON Web Token to be passed to the server for requests requiring authentication.</p>
<h4>Request Parameters</h4>
<ul>
<li><code>username</code> (<code>string</code>, required): the desired username for the new user</li>
<li><code>password</code> (<code>string</code>, required): the desired password for the new user</li>
</ul>
<h4>Return Parameters</h4>
<ul>
<li><code>user</code> (<code>object</code>)
<ul>
<li><code>id</code> (<code>number</code>): the database identifier of the user</li>
<li><code>username</code> (<code>string</code>): the username of the user</li>
</ul>
</li>
<li><code>message</code> (<code>string</code>): the success message</li>
<li><code>token</code> (<code>string</code>): the JSON Web Token which is used to authenticate the user with any future calls</li>
</ul>
<h4>Sample Call</h4>
<pre class="hljs language-js"><code>fetch(<span class="hljs-string">&#x27;http://fitnesstrac-kr.herokuapp.com/api/users/register&#x27;</span>, {
  <span class="hljs-attr">method</span>: <span class="hljs-string">&quot;POST&quot;</span>,
  <span class="hljs-attr">body</span>: <span class="hljs-built_in">JSON</span>.stringify({
    <span class="hljs-attr">username</span>: <span class="hljs-string">&#x27;superman27&#x27;</span>,
    <span class="hljs-attr">password</span>: <span class="hljs-string">&#x27;krypt0n0rbust&#x27;</span>
  })
}).then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.json())
  .then(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(result);
  })
  .catch(<span class="hljs-built_in">console</span>.error);
</code></pre>
<h4>Sample Response</h4>
<p>If the API creates a new user, the following object will be returned:</p>
<pre class="hljs language-js"><code>{
  <span class="hljs-string">&quot;user&quot;</span>: {
    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">5</span>,
    <span class="hljs-string">&quot;username&quot;</span>: <span class="hljs-string">&quot;superman27&quot;</span>
  },
  <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;you&#x27;re signed up!&quot;</span>,
  <span class="hljs-string">&quot;token&quot;</span>: <span class="hljs-string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NSwidXNlcm5hbWUiOiJzdXBlcm1hbjI3MTIiLCJpYXQiOjE2MDE3OTcwNDIsImV4cCI6MTYwMjQwMTg0Mn0.8q2B4oCtL3Dx-fRk_K0YTZaCgzrYXXeCqU6G1AI9JT0&quot;</span>
}
</code></pre>
<h3><code>POST /api/users/login</code></h3>
<p>This route is used for a user to login when they already have an account. On success, you will be given a JSON Web Token to be passed to the server for requests requiring authentication.</p>
<h4>Request Parameters</h4>
<ul>
<li><code>username</code> (<code>string</code>, required): the registered username for the user</li>
<li><code>password</code> (<code>string</code>, required): the matching password for the user</li>
</ul>
<h4>Return Parameters</h4>
<ul>
<li><code>user</code> (<code>object</code>)
<ul>
<li><code>id</code> (<code>string</code>): the database identifier of the user</li>
<li><code>username</code> (<code>string</code>): the username of the user</li>
</ul>
</li>
<li><code>message</code> (<code>string</code>): the success message</li>
<li><code>token</code> (<code>string</code>): the JSON Web Token which is used to authenticate the user with any future calls</li>
</ul>
<h4>Sample Call</h4>
<pre class="hljs language-js"><code>fetch(<span class="hljs-string">&#x27;http://fitnesstrac-kr.herokuapp.com/api/users/login&#x27;</span>, {
  <span class="hljs-attr">method</span>: <span class="hljs-string">&quot;POST&quot;</span>,
  <span class="hljs-attr">body</span>: <span class="hljs-built_in">JSON</span>.stringify({
    <span class="hljs-attr">username</span>: <span class="hljs-string">&#x27;superman27&#x27;</span>,
    <span class="hljs-attr">password</span>: <span class="hljs-string">&#x27;krypt0n0rbust&#x27;</span>
  })
}).then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.json())
  .then(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(result);
  })
  .catch(<span class="hljs-built_in">console</span>.error);
</code></pre>
<h4>Sample Response</h4>
<p>If the API authenticates the username and password, the following object will be returned:</p>
<pre class="hljs language-js"><code>{
  <span class="hljs-string">&quot;user&quot;</span>: {
    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">5</span>,
    <span class="hljs-string">&quot;username&quot;</span>: <span class="hljs-string">&quot;superman27&quot;</span>
  },
  <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;you&#x27;re logged in!&quot;</span>,
  <span class="hljs-string">&quot;token&quot;</span>: <span class="hljs-string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NSwidXNlcm5hbWUiOiJzdXBlcm1hbjI3MTIiLCJpYXQiOjE2MDE3OTczNTcsImV4cCI6MTYwMjQwMjE1N30.ZCWu6iI7u-GrchkK0vhxTH3ZD7RV56vJNvc_azBB9C0&quot;</span>
}
</code></pre>
<h3><code>GET /api/users/me</code></h3>
<p>This route is used to grab an already logged in userâ€™s relevant data. It is mostly helpful for verifying the user has a valid token (and is thus logged in). You must pass a valid token with this request, or it will be rejected.</p>
<h4>Request Parameters</h4>
<p>No request parameters are necessary for this route.</p>
<h4>Return Parameters</h4>
<ul>
<li><code>id</code> (<code>string</code>): the database identifier of the user</li>
<li><code>username</code> (<code>string</code>): the username of the user</li>
</ul>
<h4>Sample Call</h4>
<pre class="hljs language-js"><code>fetch(<span class="hljs-string">&#x27;http://fitnesstrac-kr.herokuapp.com/api/users/me&#x27;</span>, {
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span>,
    <span class="hljs-string">&#x27;Authorization&#x27;</span>: <span class="hljs-string">&#x27;Bearer TOKEN_STRING_HERE&#x27;</span>
  },
}).then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.json())
  .then(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(result);
  })
  .catch(<span class="hljs-built_in">console</span>.error);
</code></pre>
<h4>Sample Response</h4>
<pre class="hljs language-js"><code>{
  <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">5</span>,
  <span class="hljs-string">&quot;username&quot;</span>: <span class="hljs-string">&quot;superman27&quot;</span>
}
</code></pre>
<h3><code>GET /users/:username/routines</code></h3>
<p>Get a list of public routines for a particular user.</p>
<h2>Activities Endpoints</h2>
<h3><code>GET /activities</code></h3>
<p>Just returns a list of all activities in the database</p>
<h3><code>POST /activities</code> <code>(*)</code></h3>
<p>Create a new activity</p>
<h3><code>PATCH /activities/:activityId</code> <code>(*)</code></h3>
<p>Anyone can update an activity (yes, this could lead to long term problems a la wikipedia)</p>
<h3><code>GET /activities/:activityId/routines</code></h3>
<p>Get a list of all public routines which feature that activity</p>
<h2>Routines Endpoints</h2>
<h3><code>GET /routines</code></h3>
<p>Return a list of public routines, include the activities with them</p>
<h3><code>POST /routines</code> <code>(*)</code></h3>
<p>Create a new routine</p>
<h3><code>PATCH /routines/:routineId</code> <code>(**)</code></h3>
<p>Update a routine, notably change public/private, the name, or the goal</p>
<h3><code>DELETE /routines/:routineId</code> <code>(**)</code></h3>
<p>Hard delete a routine. Make sure to delete all the <code>routineActivities</code> whose routine is the one being deleted.</p>
<h3><code>POST /routines/:routineId/activities</code></h3>
<p>Attach a single activity to a routine. Prevent duplication on <code>(routineId, activityId)</code> pair.</p>
<h2>routine_activities Endpoints</h2>
<h3><code>PATCH /routine_activities/:routineActivityId</code> <code>(**)</code></h3>
<p>Update the count or duration on the routine activity</p>
<h3><code>DELETE /routine_activities/:routineActivityId</code> <code>(**)</code></h3>
<p>Remove an activity from a routine, use hard delete</p>
    </div>
    <script src="app.js" defer></script>
  </body>
</html>